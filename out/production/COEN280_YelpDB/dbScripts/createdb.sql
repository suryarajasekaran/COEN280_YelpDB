SET ESCAPE ON;

CREATE OR REPLACE TYPE VOTES AS OBJECT (
    COOL       NUMBER(5),
    FUNNY      NUMBER(5),
    USEFUL     NUMBER(5)
);

CREATE TABLE BUSINESS_MAIN_CATEGORIES (
    MAIN_CATEGORY VARCHAR(30)
);

CREATE TABLE BUSINESS (
BID             VARCHAR(25)       PRIMARY KEY,
ADDRESS         VARCHAR(250),
OP_CL           VARCHAR(5),
CITY            VARCHAR(25),
STATE           VARCHAR(2),
latitude        FLOAT(10),
longitude       FLOAT(10),
REV_COUNT       NUMBER(5),
BNAME           VARCHAR(100),
STARS           NUMBER(5),
BTYPE           VARCHAR(10)
);

CREATE TABLE USERS (
    REV_COUNT   NUMBER(5),
    USER_NAME   VARCHAR(50),
    USERID      VARCHAR(25) PRIMARY KEY,
    AVG_STARS   FLOAT(5)
);

CREATE TABLE REVIEWS (
BID         VARCHAR(25),
VOTES       VOTES,
USERID      VARCHAR(25),
RID         VARCHAR(25) PRIMARY KEY,
STARS       NUMBER(5),
REVIEW_DATE DATE,
TEXT        CLOB,
FOREIGN KEY (BID) REFERENCES BUSINESS (BID) ON DELETE CASCADE,
FOREIGN KEY (USERID) REFERENCES USERS (USERID) ON DELETE CASCADE
);

CREATE TABLE MAIN_CATEGORIES (
BID          VARCHAR(25),
MCAT         VARCHAR(50),
FOREIGN KEY (BID) REFERENCES BUSINESS (BID) ON DELETE CASCADE
);

CREATE TABLE SUB_CATEGORIES (
BID          VARCHAR(25),
SCAT         VARCHAR(50),
FOREIGN KEY (BID) REFERENCES BUSINESS (BID) ON DELETE CASCADE
);

CREATE TABLE ATTRIB (
    BID     VARCHAR(25),
    ATTR    VARCHAR(50),
    FOREIGN KEY (BID) REFERENCES BUSINESS (BID) ON DELETE CASCADE
);

CREATE TABLE LOCATON (
    BID     VARCHAR(25),
    LOC    VARCHAR(50),
    FOREIGN KEY (BID) REFERENCES BUSINESS (BID) ON DELETE CASCADE
);

CREATE TABLE HOURS (
    BID            VARCHAR(25),
    OPENHRS        NUMBER,
    CLOSEHRS       NUMBER,
    WORKDAY        VARCHAR(10),
    FOREIGN KEY (BID) REFERENCES BUSINESS (BID) ON DELETE CASCADE
);

CHECKIN TABLE